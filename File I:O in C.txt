#include <stdio.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>


int main(int argc, char *argv[])	{

	int f1, f2;
	char buf[128];
	int len;
	int notDone = 1;

	printf("argv[0]=%s\n", argv[0]);
	printf("argv[1]=%s\n", argv[1]);

	if (argc < 3) 	{
		printf("Usage: cp src_file dst_file\n");
		exit(-2);
	}
	
	f1 = open(argv[1], O_RD_ONLY);
		if (f1 < 0)	{
			printf("open failed\n");
			exit(-1);
		}
	
	f2 = open(argv[2], O_WRONLY | O_CREAT, 0777);

		if (f2 < 0)	{
			printf("open failed\n");
			exit(-1);
		}
	
	while (notDone)	{	
		len = read(f1, but, 10);
		
		if (len < 10)	{
			notDone = 0;
		}

		write(f2, buf, len);
	}

	close(f1);
	close(f2);
}

run command $ diff file1 file2
run ls -l to check the size of the two